import{Ha as d,K as o,d as a,g as r,l as c,p as n}from"./chunk-CJOGYO37.js";var h=(()=>{class s{constructor(){this.apiService=n(d),this.productsSignal=o([]),this.categoriesSignal=o([]),this.loadingSignal=o(!1),this.useBackend=o(!0),this.staticProducts=[{id:1,name:"\xC9couteurs Bluetooth Premium",price:1499.9,image:"assets/wireless-headphones.jpg",rating:4.8,reviews:328,badge:"Populaire",categoryId:1,description:"\xC9couteurs sans fil avec r\xE9duction de bruit active et autonomie de 30h."},{id:2,name:"Montre Intelligente Ultra",price:2999.9,image:"assets/modern-smartwatch.png",rating:4.6,reviews:245,badge:"Nouveau",categoryId:1,description:"Smartwatch avec GPS, moniteur cardiaque et \xE9cran AMOLED."},{id:3,name:"Cam\xE9ra Num\xE9rique 4K",price:5999.9,image:"assets/4k-camera.jpg",rating:4.9,reviews:512,badge:null,categoryId:1,description:"Cam\xE9ra professionnelle 4K avec stabilisation optique."},{id:4,name:"Batterie Externe 100W",price:799.9,image:"assets/power-bank.jpg",rating:4.7,reviews:189,badge:"En promotion",categoryId:2,description:"Power bank haute capacit\xE9 avec charge rapide 100W."},{id:5,name:"C\xE2ble USB-C Premium",price:299.9,image:"assets/usb-c-cable.jpg",rating:4.5,reviews:156,badge:null,categoryId:2,description:"C\xE2ble tress\xE9 USB-C haute vitesse, 2m."},{id:6,name:"Support T\xE9l\xE9phone Ajustable",price:199.9,image:"assets/minimalist-wooden-phone-stand.png",rating:4.3,reviews:92,badge:null,categoryId:2,description:"Support en bois naturel pour smartphone et tablette."},{id:7,name:"Lampe LED Intelligente",price:499.9,image:"assets/smart-led-lamp.jpg",rating:4.6,reviews:234,badge:"Nouveau",categoryId:3,description:"Lampe connect\xE9e avec 16 millions de couleurs."},{id:8,name:"Thermostat Connect\xE9",price:1999.9,image:"assets/smart-thermostat.jpg",rating:4.8,reviews:421,badge:null,categoryId:3,description:"Thermostat intelligent avec contr\xF4le via application."},{id:9,name:"Sonnette Vid\xE9o HD",price:1499.9,image:"assets/video-doorbell.jpg",rating:4.7,reviews:178,badge:null,categoryId:3,description:"Sonnette connect\xE9e avec cam\xE9ra HD et d\xE9tection de mouvement."},{id:10,name:"Montre de Luxe",price:2499.9,image:"assets/luxury-watch.jpg",rating:4.9,reviews:567,badge:"Populaire",categoryId:4,description:"Montre classique avec bracelet en cuir italien."},{id:11,name:"Sac \xE0 Dos Urbain",price:899.9,image:"assets/urban-backpack.jpg",rating:4.6,reviews:289,badge:null,categoryId:4,description:"Sac \xE0 dos imperm\xE9able avec compartiment laptop."},{id:12,name:"Lunettes de Soleil Premium",price:1299.9,image:"assets/premium-sunglasses.jpg",rating:4.7,reviews:201,badge:null,categoryId:4,description:"Lunettes polaris\xE9es avec protection UV400."}],this.staticCategories=[{id:1,name:"\xC9lectronique",icon:"\u{1F4F1}",color:"from-blue-500 to-blue-600",keywords:["\xE9lectronique","tech","gadget"]},{id:2,name:"Accessoires",icon:"\u{1F3A7}",color:"from-purple-500 to-purple-600",keywords:["accessoire","c\xE2ble","batterie"]},{id:3,name:"Maison",icon:"\u{1F3E0}",color:"from-green-500 to-green-600",keywords:["maison","lampe","connect\xE9"]},{id:4,name:"Mode",icon:"\u{1F455}",color:"from-pink-500 to-pink-600",keywords:["mode","montre","sac"]},{id:5,name:"Sports",icon:"\u26BD",color:"from-orange-500 to-orange-600",keywords:["sport","fitness"]},{id:6,name:"Beaut\xE9",icon:"\u{1F484}",color:"from-red-500 to-red-600",keywords:["beaut\xE9","cosm\xE9tique"]}],this.loadInitialData()}loadInitialData(){return a(this,null,function*(){this.useBackend()?yield this.loadFromBackend():(this.productsSignal.set(this.staticProducts),this.categoriesSignal.set(this.staticCategories))})}loadFromBackend(){return a(this,null,function*(){this.loadingSignal.set(!0);try{let t=yield r(this.apiService.getProducts());t.success&&t.data?this.productsSignal.set(t.data):this.productsSignal.set(this.staticProducts);let e=yield r(this.apiService.getCategories());e.success&&e.data?this.categoriesSignal.set(e.data):this.categoriesSignal.set(this.staticCategories)}catch(t){console.warn("Failed to load from backend, using static data:",t),this.productsSignal.set(this.staticProducts),this.categoriesSignal.set(this.staticCategories)}finally{this.loadingSignal.set(!1)}})}refreshData(){return a(this,null,function*(){yield this.loadFromBackend()})}getProducts(){return this.productsSignal()}getProductById(t){return this.productsSignal().find(e=>e.id===t)}getProductByIdAsync(t){return a(this,null,function*(){if(this.useBackend())try{let e=yield r(this.apiService.getProductById(t));if(e.success&&e.data)return e.data}catch(e){console.warn("Failed to load product from backend:",e)}return this.getProductById(t)})}getCategories(){return this.categoriesSignal()}getCategoryById(t){return this.categoriesSignal().find(e=>e.id===t)}getProductsByCategory(t){return this.productsSignal().filter(e=>e.categoryId===t)}getProductsByCategoryAsync(t){return a(this,null,function*(){if(this.useBackend())try{let e=yield r(this.apiService.getProductsByCategory(t));if(e.success&&e.data)return e.data}catch(e){console.warn("Failed to load products by category from backend:",e)}return this.getProductsByCategory(t)})}getAllProductsFlat(){return this.productsSignal()}searchProducts(t){let e=t.toLowerCase();return this.productsSignal().filter(i=>i.name.toLowerCase().includes(e)||i.description?.toLowerCase().includes(e))}searchProductsAsync(t){return a(this,null,function*(){if(this.useBackend())try{let e=yield r(this.apiService.searchProducts(t));if(e.success&&e.data)return e.data}catch(e){console.warn("Failed to search products from backend:",e)}return this.searchProducts(t)})}getProductsByPriceRange(t,e){return this.productsSignal().filter(i=>i.price>=t&&i.price<=e)}getTopRatedProducts(t=4){return[...this.productsSignal()].sort((e,i)=>i.rating-e.rating).slice(0,t)}getTopRatedProductsAsync(t=4){return a(this,null,function*(){if(this.useBackend())try{let e=yield r(this.apiService.getTopRatedProducts());if(e.success&&e.data)return e.data.slice(0,t)}catch(e){console.warn("Failed to load top rated products from backend:",e)}return this.getTopRatedProducts(t)})}getPromotionalProducts(){return this.productsSignal().filter(t=>t.badge==="En promotion"||t.badge==="Populaire")}getPromotionalProductsAsync(){return a(this,null,function*(){if(this.useBackend())try{let t=yield r(this.apiService.getPromotionalProducts());if(t.success&&t.data)return t.data}catch(t){console.warn("Failed to load promotional products from backend:",t)}return this.getPromotionalProducts()})}setBackendMode(t){this.useBackend.set(t),this.loadInitialData()}isLoading(){return this.loadingSignal()}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=c({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{h as a};
