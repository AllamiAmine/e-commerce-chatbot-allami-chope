import{b as H,c as z,d as P,e as X,f as Q,g as q,h as O,i as Z,j as J,k as K,m as Y}from"./chunk-AXTD64VB.js";import{Ea as G,F as l,Fa as N,Ia as D,Ja as $,K as S,M as U,O as R,Q as _,R as y,T as k,U as M,V as t,W as n,X as f,Y as b,Z as u,_ as d,a as T,b as I,ca as o,da as x,ea as E,fa as F,ga as v,ha as C,ia as w,ka as j,p as V,q as L,sa as W,u as m,v as c,w as g,x as h,xa as B}from"./chunk-CJOGYO37.js";var ee=(a,p)=>p.value,te=(a,p)=>p.id;function ne(a,p){if(a&1){let e=b();t(0,"button",21),u("click",function(){let i=m(e).$implicit,s=d();return c(s.filterRole=i.value)}),t(1,"span"),o(2),n(),t(3,"span",8),o(4),n()()}if(a&2){let e=p.$implicit,r=d();_("px-4 py-2 rounded-xl text-sm font-medium transition-colors flex items-center gap-1 "+(r.filterRole===e.value?"bg-primary text-primary-foreground":"bg-muted text-foreground hover:bg-muted/80")),l(2),x(e.icon),l(2),x(e.label)}}function ie(a,p){a&1&&(g(),t(0,"svg",47),f(1,"path",52),n())}function re(a,p){a&1&&(g(),t(0,"svg",47),f(1,"path",53),n())}function oe(a,p){if(a&1){let e=b();t(0,"tr",38)(1,"td",40)(2,"div",41)(3,"div"),o(4),n(),t(5,"div")(6,"p",42),o(7),n(),t(8,"p",26),o(9),n()()()(),t(10,"td",40)(11,"span"),o(12),n()(),t(13,"td",43)(14,"span",26),o(15),n()(),t(16,"td",44)(17,"span",26),o(18),n()(),t(19,"td",40)(20,"span"),f(21,"span"),o(22),n()(),t(23,"td",40)(24,"div",45)(25,"button",46),u("click",function(){let i=m(e).$implicit,s=d();return c(s.editUser(i))}),g(),t(26,"svg",47),f(27,"path",48),n()(),h(),t(28,"button",49),u("click",function(){let i=m(e).$implicit,s=d();return c(s.toggleStatus(i))}),U(29,ie,2,0,":svg:svg",47)(30,re,2,0,":svg:svg",47),n(),t(31,"button",50),u("click",function(){let i=m(e).$implicit,s=d();return c(s.deleteUser(i))}),g(),t(32,"svg",47),f(33,"path",51),n()()()()()}if(a&2){let e=p.$implicit,r=d();l(3),_("w-10 h-10 rounded-full bg-gradient-to-br flex items-center justify-center text-white font-semibold text-sm "+r.getRoleColor(e.role)),l(),E(" ",r.getInitials(e.name)," "),l(3),x(e.name),l(2),x(e.email),l(2),_("inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r text-white "+r.getRoleColor(e.role)),l(),F(" ",r.getRoleIcon(e.role)," ",r.getRoleLabel(e.role)," "),l(3),x(e.phone||"Non renseign\xE9"),l(3),x(r.formatDate(e.createdAt)),l(2),_("inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium "+r.getStatusColor(e.status)),l(),_("w-1.5 h-1.5 rounded-full "+r.getStatusDot(e.status)),l(),E(" ",r.getStatusLabel(e.status)," "),l(6),_("p-2 hover:bg-muted rounded-lg transition-colors "+(e.status==="active"?"text-orange-500 hover:text-orange-600":"text-green-500 hover:text-green-600")),R("title",e.status==="active"?"D\xE9sactiver":"Activer"),l(),y(e.status==="active"?29:30)}}function le(a,p){a&1&&(t(0,"tr")(1,"td",54)(2,"div",55)(3,"div",56),o(4," \u{1F465} "),n(),t(5,"p",57),o(6,"Aucun utilisateur trouv\xE9"),n()()()())}function ae(a,p){if(a&1){let e=b();t(0,"button",78),u("click",function(){let i=m(e).$implicit,s=d(2);return c(s.formData.role=i.value)}),t(1,"span",79),o(2),n(),t(3,"span",80),o(4),n()()}if(a&2){let e=p.$implicit,r=d(2);_("flex flex-col items-center gap-1 p-3 border-2 rounded-xl transition-all "+(r.formData.role===e.value?"border-primary bg-primary/5":"border-border hover:border-primary/50")),l(2),x(e.icon),l(2),x(e.label)}}function se(a,p){if(a&1){let e=b();t(0,"div",58),u("click",function(){m(e);let i=d();return c(i.closeModal())}),t(1,"div",59),u("click",function(i){return m(e),c(i.stopPropagation())}),t(2,"div",60)(3,"h2",61),o(4," {{ editingUser() ? 'Modifier l'utilisateur' : 'Ajouter un utilisateur' }} "),n(),t(5,"button",62),u("click",function(){m(e);let i=d();return c(i.closeModal())}),g(),t(6,"svg",6),f(7,"path",63),n()()(),h(),t(8,"form",64),u("ngSubmit",function(){m(e);let i=d();return c(i.saveUser())}),t(9,"div")(10,"label",65),o(11,"Nom complet"),n(),t(12,"input",66),w("ngModelChange",function(i){m(e);let s=d();return C(s.formData.name,i)||(s.formData.name=i),c(i)}),n()(),t(13,"div")(14,"label",65),o(15,"Email"),n(),t(16,"input",67),w("ngModelChange",function(i){m(e);let s=d();return C(s.formData.email,i)||(s.formData.email=i),c(i)}),n()(),t(17,"div")(18,"label",65),o(19,"T\xE9l\xE9phone"),n(),t(20,"input",68),w("ngModelChange",function(i){m(e);let s=d();return C(s.formData.phone,i)||(s.formData.phone=i),c(i)}),n()(),t(21,"div")(22,"label",65),o(23,"R\xF4le"),n(),t(24,"div",69),k(25,ae,5,4,"button",70,ee),n()(),t(27,"div")(28,"label",65),o(29,"Statut"),n(),t(30,"select",71),w("ngModelChange",function(i){m(e);let s=d();return C(s.formData.status,i)||(s.formData.status=i),c(i)}),t(31,"option",72),o(32,"Actif"),n(),t(33,"option",73),o(34,"Inactif"),n(),t(35,"option",74),o(36,"Banni"),n()()(),t(37,"div",75)(38,"button",76),u("click",function(){m(e);let i=d();return c(i.closeModal())}),o(39," Annuler "),n(),t(40,"button",77),o(41),n()()()()()}if(a&2){let e=d();l(12),v("ngModel",e.formData.name),l(4),v("ngModel",e.formData.email),l(4),v("ngModel",e.formData.phone),l(5),M(e.roles),l(5),v("ngModel",e.formData.status),l(11),E(" ",e.editingUser()?"Enregistrer":"Ajouter"," ")}}function de(a,p){if(a&1){let e=b();t(0,"div",58),u("click",function(){m(e);let i=d();return c(i.closeDeleteModal())}),t(1,"div",81),u("click",function(i){return m(e),c(i.stopPropagation())}),t(2,"div",82)(3,"div",83),g(),t(4,"svg",84),f(5,"path",51),n()(),h(),t(6,"h3",85),o(7,"Supprimer l'utilisateur ?"),n(),t(8,"p",86),o(9," \xCAtes-vous s\xFBr de vouloir supprimer "),t(10,"strong"),o(11),n(),o(12," ? Cette action est irr\xE9versible. "),n(),t(13,"div",87)(14,"button",88),u("click",function(){m(e);let i=d();return c(i.closeDeleteModal())}),o(15," Annuler "),n(),t(16,"button",89),u("click",function(){m(e);let i=d();return c(i.confirmDelete())}),o(17," Supprimer "),n()()()()()}if(a&2){let e,r=d();l(11),x((e=r.userToDelete())==null?null:e.name)}}var be=(()=>{class a{constructor(){this.authService=V($),this.router=V(G),this.searchQuery="",this.filterRole=null,this.showModal=S(!1),this.showDeleteModal=S(!1),this.editingUser=S(null),this.userToDelete=S(null),this.formData={name:"",email:"",phone:"",role:"client",status:"active"},this.roles=[{value:"client",label:"Client",icon:"\u{1F6D2}"},{value:"seller",label:"Vendeur",icon:"\u{1F3EA}"},{value:"admin",label:"Admin",icon:"\u{1F451}"}],this.users=[{id:"1",name:"Admin ShopAI",email:"admin@shopai.com",role:"admin",phone:"+212 600 000 001",createdAt:new Date("2024-01-01"),status:"active"},{id:"2",name:"Vendeur Demo",email:"seller@shopai.com",role:"seller",phone:"+212 600 000 002",createdAt:new Date("2024-06-01"),status:"active"},{id:"3",name:"Client Demo",email:"client@shopai.com",role:"client",phone:"+212 600 000 003",createdAt:new Date("2024-09-01"),status:"active"},{id:"4",name:"Ahmed Benali",email:"ahmed.b@email.com",role:"client",phone:"+212 661 234 567",createdAt:new Date("2024-10-15"),status:"active"},{id:"5",name:"Fatima Zahra",email:"fatima.z@email.com",role:"client",phone:"+212 662 345 678",createdAt:new Date("2024-11-01"),status:"active"},{id:"6",name:"Boutique Tech Plus",email:"techplus@email.com",role:"seller",phone:"+212 522 123 456",createdAt:new Date("2024-08-20"),status:"active"},{id:"7",name:"Mohamed Alami",email:"mohamed.a@email.com",role:"client",createdAt:new Date("2024-11-10"),status:"inactive"},{id:"8",name:"Sara Idrissi",email:"sara.i@email.com",role:"seller",phone:"+212 663 456 789",createdAt:new Date("2024-07-05"),status:"banned"}],this.filteredUsers=W(()=>{let e=this.users;if(this.filterRole&&(e=e.filter(r=>r.role===this.filterRole)),this.searchQuery){let r=this.searchQuery.toLowerCase();e=e.filter(i=>i.name.toLowerCase().includes(r)||i.email.toLowerCase().includes(r))}return e}),this.authService.isAdmin()||this.router.navigate(["/"])}getInitials(e){let r=e.split(" ");return r.length>=2?(r[0][0]+r[1][0]).toUpperCase():e.substring(0,2).toUpperCase()}getRoleColor(e){return D[e].color}getRoleIcon(e){return D[e].icon}getRoleLabel(e){return D[e].label}getStatusColor(e){switch(e){case"active":return"bg-green-100 text-green-600";case"inactive":return"bg-gray-100 text-gray-600";case"banned":return"bg-red-100 text-red-600";default:return"bg-gray-100 text-gray-600"}}getStatusDot(e){switch(e){case"active":return"bg-green-500";case"inactive":return"bg-gray-500";case"banned":return"bg-red-500";default:return"bg-gray-500"}}getStatusLabel(e){switch(e){case"active":return"Actif";case"inactive":return"Inactif";case"banned":return"Banni";default:return"Inconnu"}}formatDate(e){return new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",year:"numeric"})}getActiveCount(){return this.users.filter(e=>e.status==="active").length}getRoleCount(e){return this.users.filter(r=>r.role===e).length}openAddModal(){this.editingUser.set(null),this.formData={name:"",email:"",phone:"",role:"client",status:"active"},this.showModal.set(!0)}editUser(e){this.editingUser.set(e),this.formData={name:e.name,email:e.email,phone:e.phone||"",role:e.role,status:e.status},this.showModal.set(!0)}closeModal(){this.showModal.set(!1),this.editingUser.set(null)}saveUser(){if(!(!this.formData.name||!this.formData.email)){if(this.editingUser()){let e=this.users.findIndex(r=>r.id===this.editingUser().id);e!==-1&&(this.users[e]=I(T({},this.users[e]),{name:this.formData.name,email:this.formData.email,phone:this.formData.phone||void 0,role:this.formData.role,status:this.formData.status}))}else{let e={id:Date.now().toString(),name:this.formData.name,email:this.formData.email,phone:this.formData.phone||void 0,role:this.formData.role,status:this.formData.status,createdAt:new Date};this.users=[e,...this.users]}this.closeModal()}}toggleStatus(e){let r=this.users.findIndex(i=>i.id===e.id);r!==-1&&(this.users[r].status=e.status==="active"?"inactive":"active")}deleteUser(e){this.userToDelete.set(e),this.showDeleteModal.set(!0)}closeDeleteModal(){this.showDeleteModal.set(!1),this.userToDelete.set(null)}confirmDelete(){let e=this.userToDelete();e&&(this.users=this.users.filter(r=>r.id!==e.id)),this.closeDeleteModal()}static{this.\u0275fac=function(r){return new(r||a)}}static{this.\u0275cmp=L({type:a,selectors:[["app-admin-users"]],standalone:!0,features:[j],decls:74,vars:10,consts:[[1,"min-h-screen","bg-muted/30"],[1,"bg-background","border-b","border-border","sticky","top-0","z-40"],[1,"container","mx-auto","px-4","py-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","gap-4"],["routerLink","/admin",1,"flex","items-center","gap-2","text-muted-foreground","hover:text-foreground","transition-colors"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"hidden","sm:inline"],[1,"h-6","w-px","bg-border"],[1,"text-xl","font-bold","text-foreground","flex","items-center","gap-2"],[1,"flex","items-center","gap-2","px-4","py-2","bg-primary","text-primary-foreground","rounded-xl","hover:bg-primary/90","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"container","mx-auto","px-4","py-8"],[1,"bg-background","rounded-2xl","border","border-border","p-4","mb-6"],[1,"flex","flex-col","lg:flex-row","gap-4"],[1,"flex-1","relative"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"absolute","left-4","top-1/2","-translate-y-1/2","w-5","h-5","text-muted-foreground"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Rechercher par nom ou email...",1,"w-full","pl-12","pr-4","py-3","border","border-input","rounded-xl","bg-background","text-foreground","placeholder:text-muted-foreground","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"flex","gap-2"],[3,"click"],[3,"class"],[1,"grid","grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"bg-background","rounded-xl","border","border-border","p-4"],[1,"text-2xl","font-bold","text-foreground"],[1,"text-sm","text-muted-foreground"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-2xl","font-bold","text-purple-600"],[1,"bg-background","rounded-2xl","border","border-border","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-muted/50","border-b","border-border"],[1,"text-left","px-6","py-4","text-sm","font-semibold","text-foreground"],[1,"text-left","px-6","py-4","text-sm","font-semibold","text-foreground","hidden","md:table-cell"],[1,"text-left","px-6","py-4","text-sm","font-semibold","text-foreground","hidden","lg:table-cell"],[1,"text-right","px-6","py-4","text-sm","font-semibold","text-foreground"],[1,"border-b","border-border","hover:bg-muted/30","transition-colors"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","p-4"],[1,"px-6","py-4"],[1,"flex","items-center","gap-3"],[1,"font-medium","text-foreground"],[1,"px-6","py-4","hidden","md:table-cell"],[1,"px-6","py-4","hidden","lg:table-cell"],[1,"flex","items-center","justify-end","gap-2"],["title","Modifier",1,"p-2","hover:bg-muted","rounded-lg","transition-colors","text-muted-foreground","hover:text-foreground",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[3,"click","title"],["title","Supprimer",1,"p-2","hover:bg-destructive/10","rounded-lg","transition-colors","text-destructive",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["colspan","6",1,"px-6","py-12","text-center"],[1,"flex","flex-col","items-center","gap-3"],[1,"w-16","h-16","rounded-full","bg-muted","flex","items-center","justify-center","text-3xl"],[1,"text-muted-foreground"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50","p-4",3,"click"],[1,"bg-background","rounded-2xl","border","border-border","w-full","max-w-md","p-6","animate-in","fade-in","zoom-in-95",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-bold","text-foreground"],[1,"p-2","hover:bg-muted","rounded-lg","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-4",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-foreground","mb-2"],["type","text","name","name","required","",1,"w-full","px-4","py-3","border","border-input","rounded-xl","bg-background","text-foreground","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent",3,"ngModelChange","ngModel"],["type","email","name","email","required","",1,"w-full","px-4","py-3","border","border-input","rounded-xl","bg-background","text-foreground","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent",3,"ngModelChange","ngModel"],["type","tel","name","phone","placeholder","+212 6XX XXX XXX",1,"w-full","px-4","py-3","border","border-input","rounded-xl","bg-background","text-foreground","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-3","gap-2"],["type","button",3,"class"],["name","status",1,"w-full","px-4","py-3","border","border-input","rounded-xl","bg-background","text-foreground","focus:outline-none","focus:ring-2","focus:ring-primary","focus:border-transparent",3,"ngModelChange","ngModel"],["value","active"],["value","inactive"],["value","banned"],[1,"flex","gap-3","pt-4"],["type","button",1,"flex-1","px-4","py-3","border","border-border","rounded-xl","text-foreground","hover:bg-muted","transition-colors",3,"click"],["type","submit",1,"flex-1","px-4","py-3","bg-primary","text-primary-foreground","rounded-xl","hover:bg-primary/90","transition-colors"],["type","button",3,"click"],[1,"text-xl"],[1,"text-xs","font-medium"],[1,"bg-background","rounded-2xl","border","border-border","w-full","max-w-sm","p-6","animate-in","fade-in","zoom-in-95",3,"click"],[1,"text-center"],[1,"w-16","h-16","rounded-full","bg-destructive/10","flex","items-center","justify-center","mx-auto","mb-4"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-8","h-8","text-destructive"],[1,"text-lg","font-bold","text-foreground","mb-2"],[1,"text-sm","text-muted-foreground","mb-6"],[1,"flex","gap-3"],[1,"flex-1","px-4","py-3","border","border-border","rounded-xl","text-foreground","hover:bg-muted","transition-colors",3,"click"],[1,"flex-1","px-4","py-3","bg-destructive","text-destructive-foreground","rounded-xl","hover:bg-destructive/90","transition-colors",3,"click"]],template:function(r,i){r&1&&(t(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),g(),t(6,"svg",6),f(7,"path",7),n(),h(),t(8,"span",8),o(9,"Retour"),n()(),f(10,"div",9),t(11,"h1",10),o(12," \u{1F465} Gestion des Utilisateurs "),n()(),t(13,"button",11),u("click",function(){return i.openAddModal()}),g(),t(14,"svg",6),f(15,"path",12),n(),h(),t(16,"span",8),o(17,"Ajouter un utilisateur"),n()()()()(),t(18,"div",13)(19,"div",14)(20,"div",15)(21,"div",16),g(),t(22,"svg",17),f(23,"path",18),n(),h(),t(24,"input",19),w("ngModelChange",function(A){return C(i.searchQuery,A)||(i.searchQuery=A),A}),n()(),t(25,"div",20)(26,"button",21),u("click",function(){return i.filterRole=null}),o(27," Tous "),n(),k(28,ne,5,4,"button",22,ee),n()()(),t(30,"div",23)(31,"div",24)(32,"p",25),o(33),n(),t(34,"p",26),o(35,"Total utilisateurs"),n()(),t(36,"div",24)(37,"p",27),o(38),n(),t(39,"p",26),o(40,"Actifs"),n()(),t(41,"div",24)(42,"p",28),o(43),n(),t(44,"p",26),o(45,"Clients"),n()(),t(46,"div",24)(47,"p",29),o(48),n(),t(49,"p",26),o(50,"Vendeurs"),n()()(),t(51,"div",30)(52,"div",31)(53,"table",32)(54,"thead",33)(55,"tr")(56,"th",34),o(57,"Utilisateur"),n(),t(58,"th",34),o(59,"R\xF4le"),n(),t(60,"th",35),o(61,"T\xE9l\xE9phone"),n(),t(62,"th",36),o(63,"Date d'inscription"),n(),t(64,"th",34),o(65,"Statut"),n(),t(66,"th",37),o(67,"Actions"),n()()(),t(68,"tbody"),k(69,oe,34,20,"tr",38,te,!1,le,7,0,"tr"),n()()()()(),U(72,se,42,5,"div",39)(73,de,18,1,"div",39),n()),r&2&&(l(24),v("ngModel",i.searchQuery),l(2),_("px-4 py-2 rounded-xl text-sm font-medium transition-colors "+(i.filterRole===null?"bg-primary text-primary-foreground":"bg-muted text-foreground hover:bg-muted/80")),l(2),M(i.roles),l(5),x(i.users.length),l(5),x(i.getActiveCount()),l(5),x(i.getRoleCount("client")),l(5),x(i.getRoleCount("seller")),l(21),M(i.filteredUsers()),l(3),y(i.showModal()?72:-1),l(),y(i.showDeleteModal()?73:-1))},dependencies:[B,Y,q,Z,J,H,O,z,P,K,Q,X,N],encapsulation:2})}}return a})();export{be as AdminUsersComponent};
